{
  "tables": [
    {
      "tableName": "ParkingSpace",
      "description": "Individual parking space sensor nodes",
      "keySchema": {
        "partitionKey": {
          "attributeName": "nodeId",
          "attributeType": "S"
        }
      },
      "globalSecondaryIndexes": [
        {
          "indexName": "lotId-lastUpdated-index",
          "keySchema": {
            "partitionKey": {
              "attributeName": "lotId",
              "attributeType": "S"
            },
            "sortKey": {
              "attributeName": "lastUpdated",
              "attributeType": "S"
            }
          },
          "projection": {
            "projectionType": "ALL"
          }
        }
      ],
      "attributes": {
        "nodeId": "String - Unique sensor identifier (e.g., NODE_001)",
        "lotId": "String - Foreign key to ParkingLot",
        "status": "String - OCCUPIED | AVAILABLE | UNKNOWN | OFFLINE",
        "lastUpdated": "String - ISO 8601 timestamp",
        "location": "Map - {latitude: Number, longitude: Number}",
        "batteryLevel": "Number - Battery percentage (0-100)",
        "signalStrength": "Number - Signal strength in dBm",
        "metadata": "Map - {installDate, hardwareVersion, firmwareVersion}"
      },
      "billingMode": "PAY_PER_REQUEST",
      "createTableCommand": "aws dynamodb create-table --table-name ParkingSpace --attribute-definitions AttributeName=nodeId,AttributeType=S AttributeName=lotId,AttributeType=S AttributeName=lastUpdated,AttributeType=S --key-schema AttributeName=nodeId,KeyType=HASH --global-secondary-indexes 'IndexName=lotId-lastUpdated-index,KeySchema=[{AttributeName=lotId,KeyType=HASH},{AttributeName=lastUpdated,KeyType=RANGE}],Projection={ProjectionType=ALL}' --billing-mode PAY_PER_REQUEST"
    },
    {
      "tableName": "OccupancyHistory",
      "description": "Time-series historical occupancy data",
      "keySchema": {
        "partitionKey": {
          "attributeName": "nodeId",
          "attributeType": "S"
        },
        "sortKey": {
          "attributeName": "timestamp",
          "attributeType": "S"
        }
      },
      "attributes": {
        "nodeId": "String - Sensor identifier",
        "timestamp": "String - ISO 8601 timestamp (Sort Key)",
        "status": "String - OCCUPIED | AVAILABLE",
        "duration": "Number - Duration in seconds (optional)",
        "eventType": "String - ENTRY | EXIT | HEARTBEAT"
      },
      "ttl": {
        "enabled": true,
        "attributeName": "expirationTime",
        "description": "Records older than 90 days are automatically deleted"
      },
      "billingMode": "PAY_PER_REQUEST",
      "createTableCommand": "aws dynamodb create-table --table-name OccupancyHistory --attribute-definitions AttributeName=nodeId,AttributeType=S AttributeName=timestamp,AttributeType=S --key-schema AttributeName=nodeId,KeyType=HASH AttributeName=timestamp,KeyType=RANGE --billing-mode PAY_PER_REQUEST"
    },
    {
      "tableName": "ParkingLot",
      "description": "Parking lot information and metadata",
      "keySchema": {
        "partitionKey": {
          "attributeName": "lotId",
          "attributeType": "S"
        }
      },
      "attributes": {
        "lotId": "String - Unique lot identifier (e.g., LOT_A)",
        "name": "String - Display name",
        "description": "String - Lot description (optional)",
        "location": "Map - {latitude: Number, longitude: Number}",
        "boundary": "Map - {coordinates: Array<{lat, lng}>}",
        "totalSpaces": "Number - Total parking spaces",
        "currentAvailable": "Number - Cached available count",
        "zones": "List - Sub-zone identifiers (optional)",
        "metadata": "Map - {accessHours, permitTypes, amenities}",
        "lastUpdated": "String - ISO 8601 timestamp"
      },
      "billingMode": "PAY_PER_REQUEST",
      "createTableCommand": "aws dynamodb create-table --table-name ParkingLot --attribute-definitions AttributeName=lotId,AttributeType=S --key-schema AttributeName=lotId,KeyType=HASH --billing-mode PAY_PER_REQUEST"
    },
    {
      "tableName": "User",
      "description": "User accounts and preferences",
      "keySchema": {
        "partitionKey": {
          "attributeName": "userId",
          "attributeType": "S"
        }
      },
      "globalSecondaryIndexes": [
        {
          "indexName": "email-index",
          "keySchema": {
            "partitionKey": {
              "attributeName": "email",
              "attributeType": "S"
            }
          },
          "projection": {
            "projectionType": "ALL"
          }
        }
      ],
      "attributes": {
        "userId": "String - UUID v4",
        "email": "String - User email address",
        "passwordHash": "String - bcrypt hash",
        "role": "String - USER | ADMIN",
        "profile": "Map - {firstName, lastName, phone}",
        "preferences": "Map - {favoriteSpots, notifications, theme}",
        "createdAt": "String - ISO 8601 timestamp",
        "lastLogin": "String - ISO 8601 timestamp (optional)"
      },
      "billingMode": "PAY_PER_REQUEST",
      "createTableCommand": "aws dynamodb create-table --table-name User --attribute-definitions AttributeName=userId,AttributeType=S AttributeName=email,AttributeType=S --key-schema AttributeName=userId,KeyType=HASH --global-secondary-indexes 'IndexName=email-index,KeySchema=[{AttributeName=email,KeyType=HASH}],Projection={ProjectionType=ALL}' --billing-mode PAY_PER_REQUEST"
    },
    {
      "tableName": "PredictionData",
      "description": "Hourly parking demand predictions",
      "keySchema": {
        "partitionKey": {
          "attributeName": "lotId",
          "attributeType": "S"
        },
        "sortKey": {
          "attributeName": "timestamp",
          "attributeType": "S"
        }
      },
      "attributes": {
        "lotId": "String - Parking lot identifier",
        "timestamp": "String - ISO 8601 (hourly bucket)",
        "predictedOccupancy": "Number - Percentage (0-100)",
        "confidence": "Number - Confidence score (0-1)",
        "factors": "Map - {dayOfWeek, hourOfDay, isSpecialEvent, weatherCondition, historicalAverage}"
      },
      "ttl": {
        "enabled": true,
        "attributeName": "expirationTime",
        "description": "Predictions older than 7 days are automatically deleted"
      },
      "billingMode": "PAY_PER_REQUEST",
      "createTableCommand": "aws dynamodb create-table --table-name PredictionData --attribute-definitions AttributeName=lotId,AttributeType=S AttributeName=timestamp,AttributeType=S --key-schema AttributeName=lotId,KeyType=HASH AttributeName=timestamp,KeyType=RANGE --billing-mode PAY_PER_REQUEST"
    },
    {
      "tableName": "WebSocketConnections",
      "description": "Active WebSocket connections for real-time updates",
      "keySchema": {
        "partitionKey": {
          "attributeName": "connectionId",
          "attributeType": "S"
        }
      },
      "attributes": {
        "connectionId": "String - WebSocket connection ID",
        "userId": "String - User ID",
        "subscribedLots": "List - Array of lotIds",
        "connectedAt": "String - ISO 8601 timestamp"
      },
      "ttl": {
        "enabled": true,
        "attributeName": "expirationTime",
        "description": "Stale connections cleaned up automatically"
      },
      "billingMode": "PAY_PER_REQUEST",
      "createTableCommand": "aws dynamodb create-table --table-name WebSocketConnections --attribute-definitions AttributeName=connectionId,AttributeType=S --key-schema AttributeName=connectionId,KeyType=HASH --billing-mode PAY_PER_REQUEST"
    }
  ],
  "notes": {
    "billingMode": "PAY_PER_REQUEST is recommended for development. Switch to PROVISIONED for production with known traffic patterns.",
    "ttl": "Time-To-Live (TTL) must be enabled separately after table creation using: aws dynamodb update-time-to-live --table-name <TableName> --time-to-live-specification 'Enabled=true, AttributeName=expirationTime'",
    "backup": "Enable point-in-time recovery: aws dynamodb update-continuous-backups --table-name <TableName> --point-in-time-recovery-specification PointInTimeRecoveryEnabled=true",
    "monitoring": "Enable CloudWatch Contributor Insights for query patterns: aws dynamodb update-contributor-insights --table-name <TableName> --contributor-insights-action ENABLE"
  },
  "estimatedCosts": {
    "development": "$5-10/month with PAY_PER_REQUEST for ~10,000 read/write requests per day",
    "production": "$20-50/month with PROVISIONED capacity for 150 sensors + 1000 daily users",
    "storage": "$0.25 per GB-month. Expected: ~1GB for 3 months of history = $0.25/month"
  }
}
